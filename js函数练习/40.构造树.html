<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<title>Document</title>
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
	<body class="panel-body">
		<button type="button" class="btn btn-danger" onclick="add()">add</button>
	</body>
<script>
//let arr = [
//  {id:1,name:"php",pid:0},
//  {id:2,name:"php基础",pid:1},
//  {id:3,name:"php面向对象",pid:1},
//  {id:4,name:"python",pid:0},
//  {id:5,name:"python迭带器",pid:4},
//  {id:6,name:"python面向对象",pid:4},
//  {id:7,name:"python网络编程",pid:4},
//];
var json1 = {
		"code": 200,
		"data": [{
			"id": 1,
			"brand": 1,
			"name": "测试一分",
			"type": 0,
			"pid": 0
		}, {
			"id": 2,
			"brand": 1,
			"name": "测试一部",
			"type": 1,
			"pid": 1
		}, {
			"id": 4,
			"brand": 1,
			"name": "测试一区",
			"type": 2,
			"pid": 2
		}],
		"msg": "ok"
	}

var arr = json1.data
// 查询一级分类
function findChild(arr,id) {
    let childs = [];
    arr.forEach(v=>{
        if (v.type == id){
        	let isEdit = false
            childs.push({v,isEdit});
        }
    });
    return childs;
}
//
function build_tree(id) {
	console.log(id)
   let childs=  findChild(arr,id);
   if (childs.length==0){
       return null;
   }
   // 对于父节点为0的进行循环，然后查出父节点为上面结果id的节点内容
   childs.forEach((v,k)=>{
        let buildTree = build_tree(v.id);
        if (null != buildTree){
            v['children'] = buildTree;
        }
   });
    return childs;
}
console.log(build_tree(0));


	

</script>
</html>